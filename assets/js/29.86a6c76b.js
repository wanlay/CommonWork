(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{170:function(s,t,a){"use strict";a.r(t);var e=a(0),n=Object(e.a)({},(function(){var s=this.$createElement;this._self._c;return this._m(0)}),[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh","aria-hidden":"true"}},[s._v("#")]),s._v(" ssh")]),a("h2",{attrs:{id:"导入现有的公钥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导入现有的公钥","aria-hidden":"true"}},[s._v("#")]),s._v(" 导入现有的公钥")]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'IdentityFile ~/.ssh/libvirt'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.ssh/config\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("664")]),s._v(" ~/.ssh/config\n")])])]),a("h2",{attrs:{id:"ssh-config"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh-config","aria-hidden":"true"}},[s._v("#")]),s._v(" ssh config")]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Host "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172")]),s._v(".*\nIdentityFile ~/.ssh/libvirt\nProxyCommand /bin/nc -X connect -x localhost:1080 %h %p\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TCPKeepAlive")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ServerAliveInterval")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ServerAliveCountMax")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Compression")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\nControlMaster auto\nControlPath /tmp/%r@%h:%p\nControlPersist "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n")])])]),a("h2",{attrs:{id:"ubuntu配置ssh免密钥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu配置ssh免密钥","aria-hidden":"true"}},[s._v("#")]),s._v(" ubuntu配置ssh免密钥")]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 本地生成公钥和私钥")]),s._v("\nssh-keygen\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 把生成的公钥发送到对方的主机上去")]),s._v("\nssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.1.160 \n")])])]),a("h2",{attrs:{id:"centos配置ssh免密钥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos配置ssh免密钥","aria-hidden":"true"}},[s._v("#")]),s._v(" centos配置ssh免密钥")]),a("p",[s._v("先进行上面两步，然后修改"),a("code",[s._v("/etc/ssh/sshd_config")]),s._v("\n将配置前#号去掉")]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#禁用root账户登录，如果是用root用户登录请开启")]),s._v("\nPermitRootLogin "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是否让 sshd 去检查用户家目录或相关档案的权限数据，")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这是为了担心使用者将某些重要档案的权限设错，可能会导致一些问题所致。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 例如使用者的 ~.ssh/ 权限设错时，某些特殊情况下会不许用户登入")]),s._v("\nStrictModes no\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是否允许用户自行使用成对的密钥系统进行登入行为，仅针对 version 2。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 至于自制的公钥数据就放置于用户家目录下的 .ssh/authorized_keys 内")]),s._v("\nRSAAuthentication "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nPubkeyAuthentication "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nAuthorizedKeysFile      .ssh/authorized_keys\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 有了证书登录了，就禁用密码登录吧，安全要紧")]),s._v("\nPasswordAuthentication no\n\n")])])]),a("p",[s._v("重启服务")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("service sshd start\n")])])]),a("h2",{attrs:{id:"设置root用户远程登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置root用户远程登录","aria-hidden":"true"}},[s._v("#")]),s._v(" 设置root用户远程登录")]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置密码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" root\n")])])]),a("blockquote",[a("p",[s._v("/etc/ssh/sshd_config文件中改为如下")])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Authentication:")]),s._v("\nLoginGraceTime "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("120")]),s._v("\nPermitRootLogin "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#yes")]),s._v("\nStrictModes "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n")])])]),a("h2",{attrs:{id:"centos在docker设置ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos在docker设置ssh","aria-hidden":"true"}},[s._v("#")]),s._v(" centos在docker设置ssh")]),a("p",[s._v("dockerfile中需包含")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("RUN ssh-keygen -t dsa -f /etc/ssh/ssh_host_dsa_key  \nRUN ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key\n")])])])])}],!1,null,null,null);t.default=n.exports}}]);