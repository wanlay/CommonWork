(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{159:function(s,a,t){"use strict";t.r(a);var n=t(0),e=Object(n.a)({},(function(){var s=this.$createElement;this._self._c;return this._m(0)}),[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"常用的cmd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用的cmd","aria-hidden":"true"}},[s._v("#")]),s._v(" 常用的cmd")]),t("h2",{attrs:{id:"关闭selinux"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关闭selinux","aria-hidden":"true"}},[s._v("#")]),s._v(" 关闭SELinux")]),t("ol",[t("li",[s._v("临时关闭（不用重启机器）")])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("setenforce "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##设置SELinux 成为permissive模式")]),s._v("\n                              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##setenforce 1 设置SELinux 成为enforcing模式")]),s._v("\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("修改配置文件（需要重启机器）"),t("br"),s._v("\n修改"),t("code",[s._v("/etc/selinux/config")]),s._v("文件，\n将"),t("code",[s._v("SELINUX=enforcing")]),s._v("改为"),t("code",[s._v("SELINUX=disabled")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" setenforce "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/enforcing/disabled/g'")]),s._v(" /etc/selinux/config\n")])])]),t("h2",{attrs:{id:"建立stack免密用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#建立stack免密用户","aria-hidden":"true"}},[s._v("#")]),s._v(" 建立stack免密用户")]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -s /bin/bash -d /opt/stack -m stack    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##stack用户目录为/opt/stack")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stack ALL=(ALL) NOPASSWD: ALL"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /etc/sudoers.d/stack\n")])])]),t("h2",{attrs:{id:"设置时区同步时间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置时区同步时间","aria-hidden":"true"}},[s._v("#")]),s._v(" 设置时区同步时间")]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("zdump Asia/Shanghai   \n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /usr/share/zoneinfo/Asia/Shanghai /etc/localtime "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##设置时区")]),s._v("\nntpdate cn.ntp.org.cn   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##同步时间")]),s._v("\n")])])]),t("blockquote",[t("p",[s._v("国内ntp服务器IP：[58.220.207.226],[202.112.29.82],[202.108.6.95],[120.25.108.11],[182.92.12.11],[115.28.122.198]")])]),t("h2",{attrs:{id:"系统相关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#系统相关","aria-hidden":"true"}},[s._v("#")]),s._v(" 系统相关")]),t("p",[s._v("查看进程")]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" aux\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ely\n")])])]),t("p",[s._v("查看系统运行信息")]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("uptime")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 14:33:30 up 1 day, 22:13,  1 user,  load average: 1.24, 0.79, 0.74")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 14:33:30 当前时间")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# up 1 day, 22:13 实际运行时间")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1 user 有几个用户登录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# load average: 1.24, 0.79, 0.74 负载均衡")]),s._v("\n")])])]),t("p",[s._v("查看有几个用户登录,并在干什么")]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("w\n")])])]),t("p",[s._v("查看进程")]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v("\n")])])]),t("h2",{attrs:{id:"查看端口占用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看端口占用","aria-hidden":"true"}},[s._v("#")]),s._v(" 查看端口占用")]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fuser")]),s._v(" -n tcp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8182")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##查看端口")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##或者 windows")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -aon"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("findstr "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8080"')]),s._v("\n")])])]),t("h2",{attrs:{id:"查看服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看服务","aria-hidden":"true"}},[s._v("#")]),s._v(" 查看服务")]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" --status-all   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#所有服务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -ap "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#端口")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" –ef "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#端口")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" update-rc.d -f apache2 remove  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除启动项")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" update-rc.d   apache2 defaults "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#添加")]),s._v("\n")])])]),t("h2",{attrs:{id:"screen-常用用法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#screen-常用用法","aria-hidden":"true"}},[s._v("#")]),s._v(" screen 常用用法")]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" -li   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看当前用户运行的screen实例")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" -X -S "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("pid"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" quit "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除指定screen实例")]),s._v("\n\nctrl + a + p  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#同一窗口中，上一个实例")]),s._v("\nctrl + a + n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#下一个实例")]),s._v("\n\nctrl + a + "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入编辑模式")]),s._v("\nctrl + a + "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#退出编辑模式")]),s._v("\n")])])]),t("h2",{attrs:{id:"开放端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开放端口","aria-hidden":"true"}},[s._v("#")]),s._v(" 开放端口")]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("iptables -I INPUT -p tcp --dport "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v(" -j ACCEPT\n")])])]),t("h2",{attrs:{id:"popd-和-pushd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#popd-和-pushd","aria-hidden":"true"}},[s._v("#")]),s._v(" popd 和 pushd")]),t("p",[s._v("pushd和popd是对一个目录栈进行操作")]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ubuntu@ubuntu:~$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pushd")]),s._v(" /tmp/\n/tmp ~\nubuntu@ubuntu:/tmp$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("popd")]),s._v("\n~\nubuntu@ubuntu:~$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pushd")]),s._v(" /home/ubuntu/Downloads/\n~/Downloads ~\nubuntu@ubuntu:~/Downloads$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pushd")]),s._v(" /home/ubuntu/Documents/\n~/Documents ~/Downloads ~\nubuntu@ubuntu:~/Documents$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pushd")]),s._v(" -2\n~/Documents ~/Downloads ~\nubuntu@ubuntu:~/Documents$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pushd")]),s._v(" +2\n~ ~/Documents ~/Downloads\nubuntu@ubuntu:~$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pushd")]),s._v(" +1\n~/Documents ~/Downloads ~\nubuntu@ubuntu:~/Documents$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pushd")]),s._v(" -h\nbash: pushd: -h: invalid number\npushd: usage: "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pushd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("+N "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" -N "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" dir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nubuntu@ubuntu:~/Documents$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("popd")]),s._v(" \n~/Downloads ~\nubuntu@ubuntu:~/Downloads$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("popd")]),s._v(" \n~\n")])])]),t("h2",{attrs:{id:"清除buff-cache"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#清除buff-cache","aria-hidden":"true"}},[s._v("#")]),s._v(" 清除buff/cache")]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo sync && echo 3 | sudo tee /proc/sys/vm/drop_caches\n")])])]),t("h2",{attrs:{id:"定时命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#定时命令","aria-hidden":"true"}},[s._v("#")]),s._v(" 定时命令")]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("crontab\n")])])]),t("h2",{attrs:{id:"系统日志相关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#系统日志相关","aria-hidden":"true"}},[s._v("#")]),s._v(" 系统日志相关")]),t("h3",{attrs:{id:"清空日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#清空日志","aria-hidden":"true"}},[s._v("#")]),s._v(" 清空日志")]),t("p",[s._v("清空系统日志不使用"),t("code",[s._v("rm")]),s._v("，使用"),t("code",[s._v("cat /dev/null > /var/log/syslog")])]),t("h3",{attrs:{id:"限制系统日志大小"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#限制系统日志大小","aria-hidden":"true"}},[s._v("#")]),s._v(" 限制系统日志大小")]),t("p",[s._v("文件位于"),t("code",[s._v("/etc/logrotate.d/rsyslog")])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("/var/log/testlog.log "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 限制文件大小")]),s._v("\n     "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("size")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("100k\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 轮替")]),s._v("\n     rotate "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启syslogd服务，这样轮替后创建的新的日志文件才能被正常写入")]),s._v("\n     postrotate\n                    /usr/bin/killall -HUP syslogd\n     endscript\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"字符串替换"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#字符串替换","aria-hidden":"true"}},[s._v("#")]),s._v(" 字符串替换")]),t("p",[s._v("将i中 //全局替换 / （i中的/）/- 替换为-")]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("name=${i//\\//-} \n")])])]),t("h2",{attrs:{id:"特殊变量列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#特殊变量列表","aria-hidden":"true"}},[s._v("#")]),s._v(" 特殊变量列表")]),t("table",[t("thead",[t("tr",[t("th",[s._v("变量")]),t("th",[s._v("含义")])])]),t("tbody",[t("tr",[t("td",[s._v("$0")]),t("td",[s._v("当前脚本的文件名")])]),t("tr",[t("td",[s._v("$n")]),t("td",[s._v("传递给脚本或函数的参数。n 是一个数字，表示第几个参数。例如，第一个参数是$1，第二个参数是$2。")])]),t("tr",[t("td",[s._v("$#")]),t("td",[s._v("传递给脚本或函数的参数个数。")])]),t("tr",[t("td",[s._v("$*")]),t("td",[s._v("传递给脚本或函数的所有参数。")])]),t("tr",[t("td",[s._v("$@")]),t("td",[s._v('传递给脚本或函数的所有参数。被双引号(" ")包含时，与 $* 稍有不同，下面将会讲到。')])]),t("tr",[t("td",[s._v("$?")]),t("td",[s._v("上个命令的退出状态，或函数的返回值。")])]),t("tr",[t("td",[s._v("$$")]),t("td",[s._v("当前Shell进程ID。对于 Shell 脚本，就是这些脚本所在的进程ID。")])])])])])}],!1,null,null,null);a.default=e.exports}}]);